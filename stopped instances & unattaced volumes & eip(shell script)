pre req:
Step 1 â€” Pre-requisites
You need:

ec2 server setup:
1.AWS CLI installed (for shell script) OR boto3 installed (for Python)

2.IAM credentials with permissions:

ec2:DescribeInstances

ec2:DescribeVolumes

ec2:TerminateInstances

ec2:DeleteVolume

Cleanup (Cost Optimization)
A) Remove stopped instances
=======================cost optimization same region in same account===================stopped instances=============

#! /bin/bash

# stopped instances
instances=$(aws ec2 describe-instances \
  --filters Name=instance-state-name,Values=stopped \
  --query 'Reservations[*].Instances[*].InstanceId' \
  --output text)

for instance in $instances
do
  echo "Terminating instance: $instance"
  aws ec2 terminate-instances --instance-ids $instance
done

============================cost optimization all region in same account===================stopped instances
#!/bin/bash

# Get all AWS regions
regions=$(aws ec2 describe-regions --query "Regions[*].RegionName" --output text)

# Loop through each region
for region in $regions
do
  echo "Processing region: $region"

  # Get all stopped instances in this region
  instances=$(aws ec2 describe-instances \
    --region $region \
    --filters Name=instance-state-name,Values=stopped \
    --query 'Reservations[*].Instances[*].InstanceId' \
    --output text)

  # Terminate stopped instances
  for instance in $instances
  do
    echo "Terminating instance: $instance in region: $region"
    aws ec2 terminate-instances --region $region --instance-ids $instance
  done

done

==========================================# Release unattached Elastic IPs
eips=$(aws ec2 describe-addresses \
  --query "Addresses[?InstanceId==null].AllocationId" \
  --output text)

for eip in $eips
do
  echo "Releasing unattached Elastic IP: $eip"
  aws ec2 release-address --allocation-id $eip
done
===========================================================================================Remove unattached volumes
Remove unattached volumes
#!/bin/bash

# Get available volumes
volumes=$(aws ec2 describe-volumes \
  --filters Name=status,Values=available \
  --query 'Volumes[*].VolumeId' \
  --output text)

for volume in $volumes
do
  echo "Deleting volume: $volume"
  aws ec2 delete-volume --volume-id $volume
done
